angular.module("signals.controller",["AfasServices"]).factory("SharedSignalService",["SignalServiceFactory",function(e){var n=e.getInstance();return{getSignalService:function(){return n}}}]).controller("SignalsController",["$scope","$templateCache","SharedSignalService","ListServiceFactory","$ionicListDelegate","$ionicScrollDelegate","$ionicSlideBoxDelegate","$timeout","maxListTake",function(e,n,i,t,a,l,r,o,s,c){var g,d=i.getSignalService(),f=0;e.alignRight=!1,e.pageTitle=atrans("mysignals","Mijn signalen"),e.searched=!1,e.swiped=!1,e.loadingMore=!1,e.slideOptions={direction:"horizontal",initialSlide:1,autoHeight:!0},e.$on("$ionicView.enter",function(){e.refreshText=atrans("refreshtext","Laat los om te verversen"),e.refresh(),e.showmore=!1}),e.readSignal=function(n){r.enableSlide(!1),d.markAsRead(n.signal_id),g=e.signals.indexOf(n),e.signals[g].swiped=!0,f--,o(function(){e.signals.splice(g,1),e.refreshHomeBullets(),0==e.signals.length?e.gotoPage("menu.home"):r.enableSlide(!0)},400)},e.freezeLeft=function(){e.alignRight=!0,l.freezeScroll(!0)},e.freezeRight=function(){e.alignRight=!1,l.freezeScroll(!0)},e.refresh=function(){d.getSignals(0,c).then(function(n){e.signals=n,e.searched=!0,e.$broadcast("scroll.refreshComplete"),n.length>=c?e.showmore=!0:e.showmore=!1})},e.loadMore=function(){e.loadingMore||(f+=c,d.getSignals(f,c).then(function(n){e.showmore=n.length>=c;for(var i=0;i<n.length;i++)e.signals.push(n[i]);e.$broadcast("scroll.infiniteScrollComplete")})["finally"](function(){e.loadingMore=!1,l.resize(),e.$broadcast("scroll.refreshComplete")}))},e.shake=function(e){var n=document.getElementById(e);n.classList.add("animated"),n.classList.add("shake"),n.addEventListener("webkitAnimationEnd",function(){n.classList.remove("shake"),n.classList.remove("animated")},!1)}}]);