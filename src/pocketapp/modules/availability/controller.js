angular.module("availability.controller",["AfasServices"]).controller("AvailabilityController",["$scope","$state","ConnectorService","AvailabilityService","UserService","ConfigService",function(i,e,a,l,t,n){i.slider=null,i.pageTitle=atrans("availability","Bezetting"),i.sliderOptions={effect:"slide",initialSlide:7,resistanceRatio:0,paginationHide:!1,runCallbacksOnInit:!1},i.$on("$ionicSlides.sliderInitialized",function(a,l){i.slider=l.slider,null!=e.params.availability&&(i.availability=e.params.availability,i.startSlide=e.params.index)}),i.$on("$ionicSlides.slideChangeStart",function(e,a){i.canslideup=i.slider.activeIndex<i.availability.DaysSorted.length-1,i.canslidedown=i.slider.activeIndex>0,"$apply"!=i.$root.$$phase&&"$digest"!=i.$root.$$phase&&i.$apply()}),i.showhide=function(i){i.hidden=!i.hidden},i.goToEmployee=function(i){n.getConfig().then(function(a){modules=a.modules,-1!=modules.indexOf(11)&&e.go("menu.employee",{id:i},{reload:!0})})},i.goTo=function(e){"next"==e&&i.slider.slideNext(!0),"previous"==e&&i.slider.slidePrev(!0)},i.$on("$ionicView.beforeEnter",function(){var a="1";i.canslideup=!1,i.canslidedown=!1,i.availability={DaysSorted:[]};var n=new Date,s=new Date;s.setDate(s.getDate()+7),null==e.params.availability?t.getUser().then(function(e){var t=e.employee_id;l.getAvailability(a,n,s,t).then(function(e){i.availability=e,i.startSlide=0})}):null!=i.slider&&null!=e.params.availability&&(i.availability=e.params.availability,i.startSlide=e.params.index,i.pickSlide()),i.pickSlide=function(){i.slider.update(),i.slider.slideTo(i.startSlide,0),i.canslideup=i.startSlide<i.availability.DaysSorted.length-1,i.canslidedown=i.startSlide>0,"$apply"!=i.$root.$$phase&&"$digest"!=i.$root.$$phase&&i.$apply()}})}]);