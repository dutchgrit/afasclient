<ion-view view-title="{{pageTitle}}" class="afasbackgroundcolor">
  <ion-nav-buttons side="right">
    <span class="icon afaslistloading"><ion-spinner ng-if="$root.showLoading['PocketDocuments'] && documents"></ion-spinner></span>
    <div ng-include="'modules/app/corebuttons.html'"></div>
  </ion-nav-buttons>
  <ion-tabs delegate-handle="tabsdocuments" class="tabs-striped tabs-top afas-tabs" on-tap="scrollTop">
    <ion-tab title="{{::tabTitle0}}" on-select="selectTab(0)" id="tabRecent"></ion-tab>
    <ion-tab title="{{::tabTitle1}}" on-select="selectTab(1)" id="tabAll"></ion-tab>
  </ion-tabs>
  <ion-content class="has-tabs-top">
    <ion-slides options="options" class="subjectSlider" slider="data.slider">
      <ion-slide-page>
        <ion-content delegate-handle="documents" has-bouncing="false">
          <ion-refresher pulling-text="{{::refreshText}}" on-refresh="refresh()"></ion-refresher>
          <div ng-if="$root.showLoading['PocketDocuments'] && !documents" class="small-center-spinner">
            <ion-spinner></ion-spinner>
          </div>

          <div ng-if="documents.length > 0" class="fadeDiv">

            <div class="card no-padding border-radius-3px" ng-repeat="doc in documents" ng-click="goToDocument(doc.Id,1)">


              <ion-slide-box class="afas-signal-background"  show-pager="false" on-slide-changed="handleDoc(doc)" active-slide="1">
                <ion-slide class="afas-signal-padding text-right">
                  <div class="taskitemslide">
                    <span class="taskitemtext" atrans="read">Gelezen</span>
                    <i class="icon ion-refresh taskslide"></i>
                  </div>
                </ion-slide>
                <ion-slide class="background-white">

                  <div class="item item-text-wrap document-title no-bottom-border">
                    <h2>{{::doc.Description}}</h2>
                    <p ng-if="doc.Source" class="document-subtitle">
                      <span atrans="docsource">Bron</span>: {{::doc.Source}}<br>
                      <span ng-if="doc.PublicationDate"><span atrans="publishedon">Gepubliceerd op</span> {{::doc.PublicationDate | date : "mediumDate" : "+0000" }}</span>
                    </p>
                  </div>

                  <div class="item-news-image" style="background-image: url({{::doc.ImageUrl}})" ng-if="doc.ImageUrl"></div>

                  <div ng-if="doc.Intro" class="item item-text-wrap textbox item-small-vertical">
                    <div class="textfade"></div>
                    <p class="textboxIntro">{{::doc.Intro}}</p>
                  </div>
                </ion-slide>
                <ion-slide class="afas-signal-padding">
                  <div class="taskitemslide">
                    <span class="taskitemtext" atrans="read">Gelezen</span>
                    <i class="icon ion-refresh taskslide"></i>
                  </div>
                </ion-slide>

              </ion-slide-box>
            </div>


            <ion-infinite-scroll ng-if="showmore"
                                 spinner=""
                                 on-infinite="loadMore()"></ion-infinite-scroll>
          </div>
          <div>&#160;</div>
          <div ng-if="documents.length==0 && searched" class="card text-center fadeDiv item-small-vertical">
            <div class="item"><img src="img/empty.png" /><br><span atrans="nodocs">Er zijn geen documenten om te tonen.</span></div>
          </div>

        </ion-content>
      </ion-slide-page>
      <ion-slide-page>
        <ion-content delegate-handle="documents" has-bouncing="false">
          <ion-refresher pulling-text="{{refreshText}}" on-refresh="refreshAll()"></ion-refresher>

          <div class="list list-inset list-inset-small-margins">
            <div class="card withoutmarginsandpadding">
              <div class="item item-icon-left afassearchbar">
                <i class="icon ion-search placeholder-icon"></i>
                <form ng-submit="searchDocuments()">
                  <input type="search" autocorrect="off" placeholder="{{::searchplaceholder}}" ng-model="fetchData.query" ng-focus="ShowRecentSearches()"
                         ng-blur="HideRecentSearches()" id="searchDocuments" class="afassearchbarfullwidth">
                </form>
                <a ng-if="fetchData.query.length" class="button-icon ion-close input-button" id="clearTasks" ng-click="clearQuery()"></a>
              </div>
            </div>
          </div>
          <div ng-if="recent.length > 0" class="afassearchitems list">
            <div ng-repeat="r in recent" class="item item-icon-left item-icon-right afasRecentItem" ng-click="clickRecent(r)">
              <p>{{r}}</p>
              <i ng-click="removeItem($event, r)" class="icon ion-close afassearchitemclose"></i>
            </div>
          </div>

          <div class="card no-padding border-radius-3px" ng-repeat="doc in documentsAll" ng-click="goToDocument(doc.Id,0)">
            <div class="item item-text-wrap document-title no-bottom-border">
              <h2>{{::doc.Description}}</h2>
              <p ng-if="doc.Source" class="document-subtitle">
                <span atrans="docsource">Bron</span>: {{::doc.Source}}<br>
                <span ng-if="doc.PublicationDate"><span atrans="publishedon">Gepubliceerd op</span> {{::doc.PublicationDate | date : "mediumDate" : "+0000" }}</span>
              </p>
            </div>
            <div class="item-news-image" style="background-image: url({{::doc.ImageUrl}})" ng-if="doc.ImageUrl"></div>
            <div ng-if="doc.Intro" class="item item-text-wrap textbox item-small-vertical">
              <div class="textfade"></div>
              <p class="textboxIntro">{{::doc.Intro}}</p>
            </div>
          </div>

          <div ng-if="documentsAll.length==0 && searchedAll" class="card text-center fadeDiv">
            <div class="item"><img src="img/empty.png" /><br><span atrans="nodocs">Er zijn geen documenten om te tonen.</span></div>
          </div>

          <ion-infinite-scroll ng-if="showmoreAll"
                               spinner=""
                               on-infinite="loadMoreAll()"></ion-infinite-scroll>

          <div>&#160;</div>
        </ion-content>
      </ion-slide-page>
    </ion-slides>
  </ion-content>
  <multiple-views-support width="40%" />
</ion-view>
