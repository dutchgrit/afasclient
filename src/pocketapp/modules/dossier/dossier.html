<ion-view view-title="{{pageTitle}}" class="afasbackgroundcolor dossiercontainer">
  <ion-nav-title>{{pageTitle}}</ion-nav-title>
  <ion-nav-buttons side="right">
    <span class="icon afaslistloading"><ion-spinner ng-if="$root.showLoading['Pocket_Dossier']"></ion-spinner></span>
    <div ng-if="!$root.showLoading['Pocket_Dossier']" ng-include="'modules/app/corebuttons.html'"></div>
  </ion-nav-buttons>

  <ion-header-bar class="bar-light bar-subheader afasContactsHeader afasbackgroundcolor" style="height:68px;">

  <div ng-class="{'show-filter-bar': orderBy}">
    <div class="row">
      <div class="col">
        <div class="card withoutmarginsandpadding">
          <div class="item item-icon-left afassearchbar">
            <i class="icon ion-search placeholder-icon"></i>
            <form ng-submit="searchDossieritem()">
              <input type="search"
                    autocorrect="off"
                    placeholder="{{searchPlaceholder}}"
                    ng-model="query"
                    ng-focus="ShowRecentDossierSearches()"
                    ng-blur="HideRecentDossierSearches()"
                    id="searchSubjects"
                    class="afassearchbarfullwidth">
            </form>
            <a ng-if="query.length" class="button-icon ion-close input-button" id="clearDossieritems" ng-click="clearSearchDossier()"></a>
          </div>
        </div>
      </div>
      <div class="col col-15 " >
        <div class="card withoutmarginsandpadding" style="height:100%;width:100%;">
            <button class="button-icon ion-ios-list-outline" ng-click="openModalQuery($event)" style="color:#aaa; height:100%;width:100%;"></button>
        </div>
      </div>
    </div>
    <!-- Sort bar -->
    <div class="item item-divider item-icon-left filter-bar" ng-if="orderBy" ng-click="reverseSortDirection()">
      <p class="subitem">
        <i class="icon material-icons padding-right sort" ng-if="orderByDir == 1">sort</i>
        <i class="icon material-icons padding-right sort sort-reverse" ng-if="orderByDir == 0">sort</i><span>{{orderBy.name}} ({{orderByDirName}})</span>
      </p>
    </div>

    <div ng-if="recent.length > 0" class="afassearchitems list">
      <div ng-repeat="r in recent" class="item item-icon-left item-icon-right afasRecentItem" ng-click="clickRecentDossieritem(r)">
        <p>{{::r}}</p>
        <i ng-click="removeItemDossier($event, r)" class="icon ion-close afassearchitemclose"></i>
      </div>
    </div>
  </div>
  </ion-header-bar>

  <!-- List -->
  <ion-content delegate-handle="dossier" has-bouncing="false" class="dossiercontainer has-fixed-searchbar" ng-class="{'show-filter-bar': orderBy}">

    <ion-refresher pulling-text="{{refreshText}}" on-refresh="refresh()" spinner="none"></ion-refresher>

    <div ng-if="loading && !searched" class="small-center-spinner">
      <ion-spinner></ion-spinner>
    </div>

    <!-- List -->
    <div ng-if="dossieritems.length > 0" class="fadeDiv extra-padding-bottom">
      <div ng-repeat="dossieritem in dossieritems" ng-click="dossieritem.divider ? null : goToDossieritem({{dossieritem._id}})" ng-class="{'itemselected': (dossieritem._id == selectedGuid && landscape && dossieritem._id != Undefined)}">

        <!-- Header Divider -->
        <div ng-if="dossieritem.divider"  class="item item-divider capitalize-first" ng-class="{'first': $first}">{{dossieritem.divider}}</div>

        <!-- List Item -->
        <div ng-if="!dossieritem.divider" class="item item-icon-right" id="dossieritem{{::dossieritem._id}}" ng-click="goToDossieritem({{dossieritem._id}})">
          <h2 id="{{dossieritem._id + '_name'}}">{{dossieritem._name}}</h2>
          <p class="subitem">
            <i class="ion-clipboard padding-right" id="{{dossieritem._id + '_description'}}"></i>{{dossieritem._fixed_KnSbtDs}}<br />
            <i class="ion-calendar padding-right" id="{{dossieritem._id + '_date'}}"></i><span>{{dossieritem.Instuurdatum | date : "mediumDate" : "+0000" }}</span><br />
            <i class="icon ion-chevron-right icon-accessory"></i>
          </p>
        </div>
      </div>
    </div>

    <!-- No result -->
    <div ng-if="dossieritems.length == 0 && searched" class="card text-center fadeDiv">
      <!--TODO: opmaak hier netjes in divs doen-->
      <div class="item"><img src="img/empty.png"/><br /><span atrans="nodossieritemstoshow" id="nodossieritemstoshow">Er zijn geen dossieritems om te tonen.</span></div>
    </div>

    <!-- Load more -->
    <ion-infinite-scroll ng-if="showmore"
                          spinner=""
                          on-infinite="loadMoreDossieritems()"></ion-infinite-scroll>
  </ion-content>

  
    <multiple-views-support width="40%" />
  </ion-view>
  