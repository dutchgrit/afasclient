angular.module("home.controller",[]).controller("HomeController",["$scope","$state","$templateCache","$ionicSlideBoxDelegate","$ionicPopup","$ionicModal","ConnectorService","UserService","ConfigService","$ionicHistory","LocalStorageService","$rootScope",function(e,t,o,n,a,i,s,r,l,c,d,m){log("home init"),ionic.Platform.isAndroid()&&"undefined"!=typeof window.device&&(e.androidVersionSupportEnding=checkDeviceVersionLowerThan(5)),e.title=atrans("home","AFAS Pocket"),e.btn=atrans("skip","Overslaan"),e.slideIndex=0,o.put("modules/tasks/tasks.html"),o.put("modules/subject/subject.html"),o.put("modules/signals/signals.html"),o.put("modules/absence/absence.html"),l.getConfig().then(function(t){e.newMessages=isVersionOrHigher(t,"Profit11")&&t.mayChat}),r.getUser().then(function(t){e.user=t,null==SessionStorage.getItem("welcome")&&(SessionStorage.setItem("welcome","1"),d.getBaseItem("showWelcome").then(function(t){if("show"==t)d.removeBaseItem("showWelcome"),i.fromTemplateUrl("modules/home/intro_modal.html",{scope:e,animation:"fade-in"}).then(function(t){e.modal=t,t.show()});else{var o=LocalStorage.getItem("showChangelog");(appbuildversion>o||null==o)&&LocalStorage.setItem("showChangelog",appbuildversion)}})),"undefined"==typeof AppRate||m.only2FAMode||!ionic.Platform.isIOS()&&!ionic.Platform.isAndroid()||"1"!=LocalStorage.getItem("rated")&&null==SessionStorage.getItem("rated")&&(SessionStorage.setItem("rated","1"),AppRate.preferences={displayAppName:"AFAS Pocket",usesUntilPrompt:5,promptAgainForEachNewVersion:!1,inAppReview:!1,storeAppURL:{ios:"1028433924",android:"market://details?id=nl.afas.pocket2"},customLocale:{title:atrans("ratequestion","Wil je een beoordeling geven voor AFAS Pocket?"),message:atrans("feedbackneeded","Feedback is altijd gewenst om AFAS Pocket nog beter te maken. Bedankt voor je bijdrage!"),cancelButtonLabel:atrans("nopolite","Nee, bedankt!"),laterButtonLabel:atrans("notnow","Niet nu."),rateButtonLabel:atrans("askrate","Geef je beoordeling"),yesButtonLabel:atrans("yes","Ja"),noButtonLabel:atrans("no","Nee"),appRatePromptTitle:atrans("likeusing","Bevalt het gebruik van AFAS Pocket?"),feedbackPromptTitle:atrans("mindfeedback","Vervelend dat het niet helemaal bevalt! Wil je hierover feedback geven?")},callbacks:{handleNegativeFeedback:function(){e.data={};var t=a.show({template:'<textarea ng-model="data.feedback" rows="5" cols="40"></textarea>',title:atrans("negfeedback","Geef je feedback door aan AFAS!"),subTitle:atrans("feedbackok","Met je opmerkingen en suggesties kunnen wij AFAS Pocket beter maken!"),scope:e,buttons:[{text:atrans("cancel","Annuleren")},{text:atrans("send","Verstuur"),type:"button-positive",onTap:function(t){e.data.feedback&&s.executePost("feedback",{feedback:e.data.feedback})}}]});t.then(function(e){log("Got feedback "+e)})},onRateDialogShow:function(e){e(1)},onButtonClicked:function(e){(3==e||1==e)&&LocalStorage.setItem("rated","1")}},openUrl:AppRate.preferences.openUrl},AppRate.promptForRating(!1))}),e.$on("$ionicView.enter",function(){new Date;log("home view"),e.isLandscape()&&e.gotoPage("menu.tasklist"),SessionStorage.setItem("lastTaskChanged",""),c.clearHistory(),e.refreshHomeBullets()}),e.enrollPocket=function(){sessionStorage.setItem("enrollPocket","1"),t.go("login",{},{reload:!0})},e.next=function(){n.next()},e.previous=function(){n.previous()},e.slideChanged=function(t){e.slideIndex=t},e.slideLogChanged=function(t){e.slideIndex=t},e.closeModal=function(){e.modal.remove()}}]);