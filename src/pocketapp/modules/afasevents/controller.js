angular.module("afasevents.controller",["AfasServices"]).factory("SharedAFASEventService",["AFASEventServiceFactory",function(e){var t=e.getInstance();return{getAFASEventService:function(){return t}}}]).controller("AfasEventsController",["$scope","$state","SharedAFASEventService","$ionicScrollDelegate",function(e,t,n,a){var s=n.getAFASEventService();e.pageTitle="AFAS Events",e.afasevents=[],e.pickItem=function(n){null!=e.afasevents[n]&&t.go("menu.afasevent",{courseCode:e.afasevents[n].CourseCode,eventCode:e.afasevents[n].EventCode,sessionCode:e.afasevents[n].SessionCode},{reload:!0})},e.refreshText=atrans("refreshtext","Laat los om te verversen"),e.$on("$ionicView.beforeEnter",function(){("undefined"==typeof e.afasevents||0==e.afasevents.length)&&e.getEvents()}),e.fetchData={},e.searchEvents=function(){return null!=e.fetchData.query&&""!=e.fetchData.query.trim()?s.searchEvents(e.fetchData.query).then(function(t){e.afasliveevents=t.afasliveevents,e.azevents=t.azevents,e.azevents2=t.azevents2,e.afasliveevents=t.afasliveevents,e.afastheaterevents=t.afastheaterevents,e.afasevents=t.afasevents,e.afasotherevents=t.afasotherevents})["finally"](function(){e.$broadcast("scroll.refreshComplete"),a.resize()}):void e.getEvents()},e.getEvents=function(){return s.getEvents().then(function(t){e.afasliveevents=t.afasliveevents,e.azevents=t.azevents,e.azevents2=t.azevents2,e.afasliveevents=t.afasliveevents,e.afastheaterevents=t.afastheaterevents,e.afasevents=t.afasevents,e.afasotherevents=t.afasotherevents})["finally"](function(){e.$broadcast("scroll.refreshComplete"),a.resize()})}}]).controller("AfasController",["$scope","LocalStorageService",function(e,t){t.getItem("positionallowed").then(function(t){e.positionallowed="1"==t})}]).controller("AfasEventController",["$scope","$state","$stateParams","ContactServiceFactory","ConnectorService","SharedAFASEventService",function(e,t,n,a,s,o){var r=(a.getInstance(),o.getAFASEventService());e.refreshText=atrans("refreshtext","Laat los om te verversen"),e.getEvent=function(t){return r.getEvent(n.courseCode,n.eventCode,n.sessionCode,t).then(function(t){var n;if(e.afasevent=t,e.afasevent){for(e.pageTitle=e.afasevent.Name,n=0;n<e.afasevent.Employees.length;n++)e.afasevent.Employees[n].ImageId&&s.getImageData(e.afasevent.Employees[n].ImageId).then(function(t){e.afasevent.ImageUrls[t.key]=t.url});for(n=0;n<e.afasevent.Relations.length;n++)e.afasevent.Relations[n].ImageId&&s.getImageData(e.afasevent.Relations[n].ImageId).then(function(t){e.afasevent.ImageUrls[t.key]=t.url})}})["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.gotoPerson=function(e){t.go("menu.contact",{contactId:e},{reload:!0})},e.gotoEmployee=function(e,n,a){n==e?t.go("menu.contact",{contactId:a},{reload:!0}):t.go("menu.employee",{id:e},{reload:!0})},e.$on("$ionicView.beforeEnter",function(){e.afasevent=e.getEvent(!1)})}]).controller("AfasLiveAnizerController",["$scope","$state","$stateParams","SharedAFASEventService","LongOperationService",function(e,t,n,a,s){var o=a.getAFASEventService();e.pageTitle="AFASLiveanizer",e.pickGenre=function(e){t.go("menu.afasliveanizer",{step:1,genre:e},{reload:!0})},e.refreshText=atrans("refreshtext","Laat los om te verversen"),e.gotoinsite=function(){openUrlGlobal("https://32772.afasinsite.nl/alle-cursus-insite-evenementen/overzicht-afas-live")},e.pickItem=function(n){null!=e.afasevents[n]&&t.go("menu.afasevent",{courseCode:e.afasevents[n].Cursuscode,eventCode:e.afasevents[n].Evenementcode,sessionCode:e.afasevents[n].Sessiecode},{reload:!0})},e.getEvents=function(){s.startBlock(),o.getLiveEventsByGenre(e.genre).then(function(t){e.afaseventsfree=t.free,e.afaseventsoccupied=t.occupied,e.afasevents=t.afasevents})["finally"](function(){e.loaded=!0,s.endBlock(),e.$broadcast("scroll.refreshComplete")})},e.$on("$ionicView.beforeEnter",function(){e.step=n.step,e.genre=n.genre,1==e.step&&e.getEvents()})}]);